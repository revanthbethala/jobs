import{r as m,j as e,m as F,C as I,D as S,ad as w,E as B,B as u,L as t,I as i,$ as U,a0 as E,a1 as O,a2 as k,a3 as N,aJ as R}from"./index-B6peOCw_.js";import{u as D}from"./ProfileForm-VuOrXFuP.js";import{p as L}from"./profileSchema-BSuZFTwb.js";import{U as M}from"./user-BHYVgTmJ.js";import{U as T}from"./upload-D4eTD2ic.js";import"./profileService-BNGQwc4A.js";function W(){const{tempPersonalInfo:r,updatePersonalInfo:h,profileUrl:x,setCurrentStep:v}=D(),[a,o]=m.useState({}),[p,j]=m.useState(null),[b,f]=m.useState(!!x),g=m.useRef(null),l=(s,c)=>{h({[s]:c}),a[s]&&o(d=>({...d,[s]:""}))},y=s=>{const c=s.target.files?.[0];if(c){if(c.size>2*1024*1024){o(n=>({...n,profilePic:"Profile picture must be less than 2MB"}));return}if(!c.type.startsWith("image/")){o(n=>({...n,profilePic:"Profile picture must be an image"}));return}h({profilePic:c});const d=new FileReader;d.onload=n=>j(n.target?.result),d.readAsDataURL(c),a.profilePic&&o(n=>({...n,profilePic:""}))}},P=()=>{h({profilePic:null}),j(null),x&&f(!0),a.profilePic&&o(s=>({...s,profilePic:""}))},C=()=>{try{L.parse(r),v(2)}catch(s){const c={};s.errors?.forEach(d=>{c[d.path[0]]=d.message}),o(c)}};return e.jsx(F.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:e.jsxs(I,{className:"w-full max-w-4xl mx-auto",children:[e.jsx(S,{children:e.jsx(w,{className:"text-2xl font-bold text-brand-blue-dark",children:"Personal Information"})}),e.jsxs(B,{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"relative",children:b?e.jsx("img",{src:"http://localhost:3000"+x,alt:"profile",className:"w-24 h-24 rounded-full object-cover border-4 border-brand-blue-light"}):e.jsx("span",{children:p?e.jsx("img",{src:p||"/placeholder.svg",alt:"Profile preview",className:"w-24 h-24 rounded-full object-cover border-4 border-brand-blue-light"}):e.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-200 flex items-center justify-center border-4 border-gray-300",children:e.jsx(M,{className:"w-8 h-8 text-gray-500"})})})}),e.jsxs(u,{type:"button",variant:"outline",onClick:()=>{g.current?.click(),f(!1)},className:"flex items-center space-x-2",children:[e.jsx(T,{className:"w-4 h-4"}),e.jsx("span",{children:"Upload Profile Picture"})]}),r.profilePic&&e.jsx(u,{onClick:P,className:"text-sm ",variant:"destructive",children:"Remove Profile Pic"}),e.jsx("input",{ref:g,type:"file",accept:"image/*",onChange:y,className:"hidden"}),a.profilePic&&e.jsx("p",{className:"text-red-500 text-sm text-center",children:a.profilePic})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"username",children:"Username"}),e.jsx(i,{id:"username",value:r.username||"",disabled:!0,className:"bg-gray-100"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"email",children:"Email"}),e.jsx(i,{id:"email",type:"email",value:r.email||"",disabled:!0,className:"bg-gray-100"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"collegeId",children:"College ID"}),e.jsx(i,{id:"collegeId",value:r.collegeId||"",onChange:s=>l("collegeId",s.target.value),className:a.collegeId?"border-red-500":""}),a.collegeId&&e.jsx("p",{className:"text-red-500 text-sm",children:a.collegeId})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"firstName",children:"First Name"}),e.jsx(i,{id:"firstName",value:r.firstName||"",onChange:s=>l("firstName",s.target.value),className:a.firstName?"border-red-500":""}),a.firstName&&e.jsx("p",{className:"text-red-500 text-sm",children:a.firstName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"lastName",children:"Last Name"}),e.jsx(i,{id:"lastName",value:r.lastName||"",onChange:s=>l("lastName",s.target.value),className:a.lastName?"border-red-500":""}),a.lastName&&e.jsx("p",{className:"text-red-500 text-sm",children:a.lastName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"gender",children:"Gender"}),e.jsxs(U,{value:r.gender||"",onValueChange:s=>l("gender",s),children:[e.jsx(E,{className:a.gender?"border-red-500":"",children:e.jsx(O,{placeholder:"Select gender"})}),e.jsxs(k,{children:[e.jsx(N,{value:"Male",children:"Male"}),e.jsx(N,{value:"Female",children:"Female"}),e.jsx(N,{value:"Prefer not to say",children:"Prefer not to say"})]})]}),a.gender&&e.jsx("p",{className:"text-red-500 text-sm",children:a.gender})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"dateOfBirth",children:"Date of Birth"}),e.jsx(i,{id:"dateOfBirth",type:"date",value:r.dateOfBirth||"",onChange:s=>l("dateOfBirth",s.target.value),className:a.dateOfBirth?"border-red-500":""}),a.dateOfBirth&&e.jsx("p",{className:"text-red-500 text-sm",children:a.dateOfBirth})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"phoneNumber",children:"Phone Number"}),e.jsx(i,{id:"phoneNumber",value:r.phoneNumber||"",onChange:s=>l("phoneNumber",s.target.value),className:a.phoneNumber?"border-red-500":""}),a.phoneNumber&&e.jsx("p",{className:"text-red-500 text-sm",children:a.phoneNumber})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"fatherName",children:"Father's Name"}),e.jsx(i,{id:"fatherName",value:r.fatherName||"",onChange:s=>l("fatherName",s.target.value),className:a.fatherName?"border-red-500":""}),a.fatherName&&e.jsx("p",{className:"text-red-500 text-sm",children:a.fatherName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"motherName",children:"Mother's Name"}),e.jsx(i,{id:"motherName",value:r.motherName||"",onChange:s=>l("motherName",s.target.value),className:a.motherName?"border-red-500":""}),a.motherName&&e.jsx("p",{className:"text-red-500 text-sm",children:a.motherName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"city",children:"City"}),e.jsx(i,{id:"city",value:r.city||"",onChange:s=>l("city",s.target.value),className:a.city?"border-red-500":""}),a.city&&e.jsx("p",{className:"text-red-500 text-sm",children:a.city})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"state",children:"State"}),e.jsx(i,{id:"state",value:r.state||"",onChange:s=>l("state",s.target.value),className:a.state?"border-red-500":""}),a.state&&e.jsx("p",{className:"text-red-500 text-sm",children:a.state})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"country",children:"Country"}),e.jsx(i,{id:"country",value:r.country||"",onChange:s=>l("country",s.target.value),className:a.country?"border-red-500":""}),a.country&&e.jsx("p",{className:"text-red-500 text-sm",children:a.country})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"address",children:"Address"}),e.jsx(R,{id:"address",value:r.address||"",onChange:s=>l("address",s.target.value),className:a.address?"border-red-500":"",rows:3}),a.address&&e.jsx("p",{className:"text-red-500 text-sm",children:a.address})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(u,{onClick:C,className:"bg-brand-blue-light hover:bg-brand-blue-dark",children:"Next"})})]})]})})}export{W as default};
