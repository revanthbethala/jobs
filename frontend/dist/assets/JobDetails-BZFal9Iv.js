import{c as E,z as X,f as H,r as w,y as I,j as e,ay as P,h as F,k as U,l as V,n as $,p as G,q as W,v as K,w as Q,B as y,m as d,C as N,E as v,g as Z,D,ad as M,a7 as A,A as ee,a8 as se,az as ae,aA as te,ag as ne,b as re,am as le,au as ie,ap as oe}from"./index-B6peOCw_.js";import{D as ce,b as de,c as he,d as me,e as xe,f as pe,g as ue}from"./dialog-CxEiXBrx.js";import{A as fe}from"./arrow-left-OB26W1DN.js";import{M as ge,P as je}from"./phone-CxFLJyFf.js";import{B as be}from"./briefcase-Co-HXN32.js";import{G as ye}from"./graduation-cap-C9o7p5bm.js";import{M as Ne}from"./mail-GgfDYgua.js";import{t as h,c as ve,b as we,e as De,g as L,n as R,o as S,f as Me}from"./format-DnD798-5.js";import{e as ke,d as Ce}from"./endOfMonth-BA6hoN7i.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=E("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=E("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=E("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=E("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);function T(a,n){const l=h(a),i=h(n),t=l.getTime()-i.getTime();return t<0?-1:t>0?1:t}function Ie(a){return ve(a,Date.now())}function Pe(a){return n=>{const i=(a?Math[a]:Math.trunc)(n);return i===0?0:i}}function Le(a,n){return+h(a)-+h(n)}function Re(a){const n=h(a);return n.setHours(23,59,59,999),n}function Oe(a){const n=h(a);return+Re(n)==+ke(n)}function Be(a,n){const l=h(a),i=h(n),t=T(l,i),m=Math.abs(Ce(l,i));let x;if(m<1)x=0;else{l.getMonth()===1&&l.getDate()>27&&l.setDate(30),l.setMonth(l.getMonth()-t*m);let r=T(l,i)===-t;Oe(h(a))&&m===1&&T(a,i)===1&&(r=!1),x=t*(m-Number(r))}return x===0?0:x}function Je(a,n,l){const i=Le(a,n)/1e3;return Pe(l?.roundingMethod)(i)}function qe(a,n,l){const i=we(),t=l?.locale??i.locale??De,m=2520,x=T(a,n);if(isNaN(x))throw new RangeError("Invalid time value");const r=Object.assign({},l,{addSuffix:l?.addSuffix,comparison:x});let g,f;x>0?(g=h(n),f=h(a)):(g=h(a),f=h(n));const p=Je(f,g),C=(L(f)-L(g))/1e3,o=Math.round((p-C)/60);let j;if(o<2)return l?.includeSeconds?p<5?t.formatDistance("lessThanXSeconds",5,r):p<10?t.formatDistance("lessThanXSeconds",10,r):p<20?t.formatDistance("lessThanXSeconds",20,r):p<40?t.formatDistance("halfAMinute",0,r):p<60?t.formatDistance("lessThanXMinutes",1,r):t.formatDistance("xMinutes",1,r):o===0?t.formatDistance("lessThanXMinutes",1,r):t.formatDistance("xMinutes",o,r);if(o<45)return t.formatDistance("xMinutes",o,r);if(o<90)return t.formatDistance("aboutXHours",1,r);if(o<R){const u=Math.round(o/60);return t.formatDistance("aboutXHours",u,r)}else{if(o<m)return t.formatDistance("xDays",1,r);if(o<S){const u=Math.round(o/R);return t.formatDistance("xDays",u,r)}else if(o<S*2)return j=Math.round(o/S),t.formatDistance("aboutXMonths",j,r)}if(j=Be(f,g),j<12){const u=Math.round(o/S);return t.formatDistance("xMonths",u,r)}else{const u=j%12,s=Math.trunc(j/12);return u<3?t.formatDistance("aboutXYears",s,r):u<9?t.formatDistance("overXYears",s,r):t.formatDistance("almostXYears",s+1,r)}}function _e(a,n){return qe(a,Ie(a),n)}const O=re.getState().role;console.log("Role",O);function ze(){const{jobId:a}=X(),n=H(),[l,i]=w.useState(!1),[t,m]=w.useState(!1),[x,r]=w.useState(!1),[g,f]=w.useState(!1),[p,C]=w.useState(null),{data:o,isLoading:j,error:u}=I({queryKey:["userApplications"],queryFn:ie,refetchOnMount:!1});console.log("application data",o);const{data:s,isLoading:B,error:J,isError:q}=I({queryKey:["jobDetails"],queryFn:()=>oe(a)});if(w.useEffect(()=>{if(!o?.applications)return;const c=o.applications.find(k=>k.jobId===a);c&&(C(c.status),console.log("Job Status:",c.status))},[a,o]),q)return console.error("Error fetching job details:",J),e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("p",{className:"text-red-500",children:"Failed to load job details."})});const _=async()=>{r(!0),console.log("U clicked Apply Now")},z=async()=>{try{f(!0);const c=await te(s?.id);console.log("Apply Job Response:",c),f(!1),C("Pending")}catch(c){const k=c?.response?.data?.message;ne({title:k||"Unknown error occurred",variant:"destructive"})}},Y={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},b={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}};return B?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx(P,{className:"animate-spin h-10 w-10 text-blue-500"})}):e.jsxs("div",{children:[e.jsx("div",{className:"w-fit h-fit",children:e.jsx(F,{open:t,onOpenChange:m,children:e.jsxs(U,{children:[e.jsxs(V,{children:[e.jsxs($,{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"rounded-full border p-5 ",children:e.jsx(Ee,{size:37,className:"text-red-600 "})}),e.jsx("span",{children:"Profile Incomplete"})]}),e.jsx(G,{children:"Your profile is incomplete. Please complete your profile before applying for jobs."})]}),e.jsxs(W,{children:[e.jsx(K,{onClick:()=>m(!1),children:"Close"}),e.jsx(Q,{className:"bg-red-600 text-white hover:bg-red-700",onClick:()=>{n("/profile"),m(!1)},children:"Go to Profile"})]})]})})}),e.jsx(ce,{open:x,onOpenChange:r,children:e.jsxs(de,{children:[e.jsxs(he,{children:[e.jsxs(me,{children:["Apply for ",s.jobTitle]}),e.jsxs(xe,{children:["Are you sure you want to apply for this position at"," ",s.companyName,"?"]})]}),e.jsxs(pe,{children:[e.jsx(ue,{asChild:!0,children:e.jsx(y,{variant:"ghost",children:"Cancel"})}),e.jsx(y,{className:"bg-green-600 text-white hover:bg-green-700",onClick:z,children:g?e.jsxs("span",{className:"flex gap-1",children:[e.jsx(P,{className:"animate-spin h-4 w-4 mr-2"})," Applying"]}):"Apply Now"})]})]})}),e.jsx(d.header,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-white/80 backdrop-blur-sm border-b border-gray-200 sticky top-0 z-10",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs(y,{onClick:()=>n(-1),variant:"ghost",className:"hover:bg-gray-100",children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),"Back to Jobs"]})})}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs(d.div,{variants:Y,initial:"hidden",animate:"visible",className:"max-w-6xl mx-auto",children:[e.jsx(d.div,{variants:b,children:e.jsx(N,{className:"mb-8 overflow-hidden border-0 shadow-lg bg-gradient-to-r from-white to-gray-50",children:e.jsx(v,{className:"p-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-6",children:[e.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[e.jsx("div",{className:"relative",children:e.jsx("img",{loading:"lazy",src:`http://localhost:3000${s.companyLogo} `,alt:"logo",className:"w-20 h-20 rounded-xl object-cover shadow-md"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-3 leading-tight",children:s.jobTitle}),e.jsxs("div",{className:"flex text-sm flex-wrap items-center gap-4 text-gray-600 mb-4",children:[e.jsxs("span",{className:"flex items-center gap-2 bg-gray-100 px-3 py-1 rounded-full",children:[e.jsx(Ae,{className:"w-4 h-4 text-brand-blue-light"}),e.jsx("span",{className:"font-medium",children:s.companyName})]}),e.jsxs("span",{className:"flex items-center gap-2 bg-gray-100 px-3 py-1 rounded-full",children:[e.jsx(ge,{className:"w-4 h-4 text-red-500"}),e.jsx("span",{className:"font-medium",children:s.location})]}),e.jsxs("span",{className:"flex items-center gap-2 bg-gray-100 px-3 py-1 rounded-full",children:[e.jsx(be,{className:"w-4 h-4 text-purple-500"}),e.jsx("span",{className:"font-medium",children:s.jobType})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Se,{className:"w-4 h-4"}),"Posted"," ",_e(new Date(s.postedDate),{addSuffix:!0})]}),e.jsxs("span",{className:"font-medium",children:["Apply by"," ",Me(new Date(s.lastDateToApply),"dd MMM YYY")]})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"text-xl font-bold capitalize ",children:["Salary: ",s.salary]})}),O==="USER"&&e.jsx("span",{children:p?e.jsxs(y,{className:Z(p&&"bg-pending hover:bg-pending/80","py-3 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"),children:["Application Status: ",p]}):e.jsx(y,{onClick:_,className:"bg-brand-blue-light hover:bg-brand-blue-dark transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:"Apply Now"})})]})]})})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsx(Ye,{job:s,itemVariants:b}),(s.allowedBranches.length>0||s.allowedPassingYears.length>0)&&e.jsx(d.div,{variants:b,children:e.jsxs(N,{className:"border-0 shadow-lg",children:[e.jsx(D,{className:"pb-4",children:e.jsxs(M,{className:"flex items-center gap-3 text-2xl",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg",children:e.jsx(ye,{className:"w-6 h-6 text-white"})}),"Eligibility Criteria"]})}),e.jsx(v,{children:e.jsxs("div",{className:"space-y-6",children:[s.allowedBranches.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"Allowed Branches"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.allowedBranches.map(c=>e.jsx(A,{className:"bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100 px-3 py-1.5 text-sm font-medium",children:c},c))})]}),s.allowedPassingYears.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Passing Years"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.allowedPassingYears.map(c=>e.jsx(A,{className:"bg-green-50 text-green-700 border-green-200 hover:bg-green-100 px-3 py-1.5 text-sm font-medium",children:c},c))})]})]})})]})}),e.jsx(d.div,{variants:b,children:e.jsxs(N,{className:"border-0 shadow-lg",children:[e.jsx(D,{className:"pb-4",children:e.jsx(M,{className:"text-xl",children:"Skills Required"})}),e.jsx(v,{children:e.jsx("div",{className:"flex flex-wrap gap-3",children:s.skillsRequired.map((c,k)=>e.jsx(d.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:k*.05},children:e.jsx(A,{variant:"secondary",className:"px-3 py-2 text-sm font-medium bg-gray-100 hover:bg-gray-200 transition-colors",children:c})},c))})})]})}),e.jsx(d.div,{variants:b,children:e.jsxs(N,{className:"border-0 shadow-lg",children:[e.jsx(D,{className:"pb-4",children:e.jsx(M,{className:"text-xl",children:"Job Description"})}),e.jsx(v,{children:e.jsx("div",{className:"prose prose-gray max-w-none",children:e.jsx(ee,{mode:"wait",children:s?.Description?.length>300&&!l?e.jsxs(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsxs("p",{className:"text-gray-700 leading-relaxed",children:[s.jobDescription.substring(0,300),"..."]}),e.jsxs(y,{variant:"ghost",onClick:()=>i(!0),className:"mt-3 text-brand-blue-light hover:text-brand-blue-dark",children:[e.jsx(se,{className:"w-4 h-4 mr-1"}),"Read More"]})]},"collapsed"):e.jsxs(d.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx("p",{className:"text-gray-700 leading-relaxed",children:s.jobDescription}),s.Description>300&&e.jsxs(y,{variant:"ghost",onClick:()=>i(!1),className:"mt-3 text-brand-blue-light hover:text-brand-blue-dark",children:[e.jsx(ae,{className:"w-4 h-4 mr-1"}),"Read Less"]})]},"expanded")})})})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(d.div,{variants:b,children:e.jsxs(N,{className:"border-0 shadow-lg",children:[e.jsx(D,{className:"pb-4",children:e.jsx(M,{className:"text-lg",children:"Job Details"})}),e.jsxs(v,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Experience"}),e.jsx("span",{className:"font-semibold",children:s.experience})]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Job Role"}),e.jsx("span",{className:"font-semibold",children:s.jobRole})]}),e.jsx("hr",{}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Job Type"}),e.jsx(A,{variant:"outline",children:s.jobType})]})]})]})}),e.jsx(d.div,{variants:b,children:e.jsxs(N,{className:"border-0 shadow-lg",children:[e.jsx(D,{className:"pb-4",children:e.jsx(M,{className:"text-lg",children:"Company Contact"})}),e.jsxs(v,{className:"space-y-3",children:[s.companyWebsite&&e.jsxs("a",{href:s.companyWebsite,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-brand-blue-light hover:text-brand-blue-dark transition-colors group",children:[e.jsx(Te,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),e.jsx("span",{className:"text-sm",children:"Visit Website"})]}),s.companyEmail&&e.jsxs("a",{href:`mailto:${s.companyEmail}`,className:"flex items-center gap-2 text-brand-blue-light hover:text-brand-blue-dark transition-colors group",children:[e.jsx(Ne,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),e.jsx("span",{className:"text-sm",children:"Send Email"})]}),s.companyPhone&&e.jsxs("a",{href:`tel:${s.companyPhone}`,className:"flex items-center gap-2 text-brand-blue-light hover:text-brand-blue-dark transition-colors group",children:[e.jsx(je,{className:"w-4 h-4 group-hover:scale-110 transition-transform"}),e.jsx("span",{className:"text-sm",children:"Call Now"})]})]})]})})]})]})]})})]})}function Ye({job:a,itemVariants:n}){const l=!!a?.rounds;return console.log("Calling interview rounds",a),e.jsx(d.div,{variants:n,children:l&&e.jsxs(N,{className:"border-0 shadow-lg",children:[e.jsx(D,{className:"pb-4",children:e.jsxs(M,{className:"flex items-center gap-3 text-2xl",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-brand-blue-light to-brand-blue-dark rounded-lg",children:e.jsx(le,{className:"w-6 h-6 text-white"})}),"Interview Process"]})}),e.jsx(v,{children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-6 top-8 bottom-8 w-0.5 bg-gradient-to-b from-brand-blue-light to-brand-blue-dark opacity-30"}),e.jsx("div",{className:"space-y-6",children:a.rounds.map((i,t)=>e.jsxs(d.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:t*.1},className:"relative flex gap-4 group",children:[e.jsx("div",{className:"relative z-10 flex-shrink-0 w-12 h-12 bg-gradient-to-br from-brand-blue-light to-brand-blue-dark text-white rounded-full flex items-center justify-center text-lg font-bold shadow-lg group-hover:scale-110 transition-transform duration-200",children:i.roundNumber}),e.jsxs("div",{className:"flex-1 bg-gray-50 rounded-xl p-4 group-hover:bg-white group-hover:shadow-md transition-all duration-200",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2",children:i.roundName}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:i.description})]})]},i.roundNumber))})]})})]})})}const Qe=Object.freeze(Object.defineProperty({__proto__:null,default:ze},Symbol.toStringTag,{value:"Module"}));export{Ae as B,ze as J,Qe as a,_e as f};
