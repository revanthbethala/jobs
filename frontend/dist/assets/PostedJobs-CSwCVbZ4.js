import{c,y as S,r as n,aw as U,f as O,j as e,ar as B,B as l,m as P,T as V,F,G as g,H as a,J as z,K as t,h as E,i as H,af as I,k as $,l as q,n as L,p as Q,q as R,v as Z,w as K,ax as G,ag as y,at as Y}from"./index-B6peOCw_.js";import{D as _,a as W,b as X,c as ee,d as se,e as ae,f as te}from"./dialog-CxEiXBrx.js";import{P as le}from"./pencil-DB6CjSOd.js";import{f as ie}from"./format-DnD798-5.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=c("ArrowDownAZ",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=c("ArrowUpAZ",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M20 8h-5",key:"1vsyxs"}],["path",{d:"M15 10V6.5a2.5 2.5 0 0 1 5 0V10",key:"ag13bf"}],["path",{d:"M15 14h5l-5 6h5",key:"ur5jdg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=c("BriefcaseBusiness",[["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M16 6V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2",key:"1ksdt3"}],["path",{d:"M22 13a18.15 18.15 0 0 1-20 0",key:"12hx5q"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);function pe(){const{data:d,isLoading:b,isError:f,refetch:D}=S({queryKey:["posted-jobs"],queryFn:Y}),[h,w]=n.useState(null),[v,o]=n.useState(!1),[x,N]=n.useState(""),p=U(x,500),[u,k]=n.useState("desc"),i=O(),A=async s=>{try{await G(s),y({title:"Job deleted successfully",description:`Job with ID ${s} has been deleted.`}),D()}catch(r){console.error("Error deleting job:",r),y({title:"Error deleting job",description:"Failed to delete the job. Please try again.",variant:"destructive"})}},C=s=>{w(s),o(!0)},T=s=>{console.log("Confirmed update for job:",h),i(`/update-job/${s}`),o(!1)},J=()=>{k(s=>s==="asc"?"desc":"asc")};if(b)return e.jsx("div",{className:"p-4 space-y-4",children:[...Array(3)].map((s,r)=>e.jsx(B,{className:"h-12 w-full rounded-xl"},r))});if(f)return e.jsx("div",{className:"p-4 text-red-600 font-medium",children:"Failed to load jobs."});if(d.length===0)return e.jsxs("div",{className:"h-[calc(100vh-150px)] flex flex-col items-center justify-center text-center text-gray-500 px-4",children:[e.jsx(ne,{className:"w-16 h-16 mb-4 opacity-60"}),e.jsx("h3",{className:"text-lg font-semibold",children:"No jobs posted yet"}),e.jsx("p",{className:"text-sm mt-1",children:'Start by clicking the "Post a Job" button to create one.'}),e.jsx(l,{className:"mt-4 bg-brand-blue-light hover:bg-brand-blue-light/80",onClick:()=>i("/post-job"),children:"Post a Job"})]});const M=d?.filter(s=>s.jobTitle.toLowerCase().includes(typeof p=="string"?p?.toLowerCase():"")).sort((s,r)=>{const m=new Date(s.postedDate).getTime(),j=new Date(r.postedDate).getTime();return u==="asc"?m-j:j-m});return e.jsxs(P.div,{className:"p-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"My Posted Jobs"}),e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4",children:e.jsx("input",{type:"text",value:x,onChange:s=>N(s.target.value),placeholder:"Search by job title...",className:"w-full sm:w-1/2 p-2 border text-sm border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsx("div",{className:"border rounded-xl overflow-hidden shadow-sm",children:e.jsxs(V,{children:[e.jsx(F,{className:"bg-gray-100",children:e.jsxs(g,{children:[e.jsx(a,{children:"Job Title"}),e.jsx(a,{children:"Job Type"}),e.jsx(a,{children:"Company Name"}),e.jsxs(a,{onClick:J,className:"cursor-pointer select-none flex items-center gap-1",children:["Posted On",u==="desc"?e.jsx(re,{className:"w-4 h-4"}):e.jsx(oe,{className:"w-4 h-4"})]}),e.jsx(a,{children:"Applications"}),e.jsx(a,{children:"Interview Rounds"}),e.jsx(a,{children:"View Details"}),e.jsx(a,{children:"Update Jobs"}),e.jsx(a,{children:"Delete Jobs"})]})}),e.jsx(z,{children:M?.map(s=>e.jsxs(g,{className:"hover:bg-muted/40 transition",children:[e.jsx(t,{className:"font-medium capitalize",children:s.jobTitle}),e.jsx(t,{className:"font-medium capitalize",children:s.jobType}),e.jsx(t,{className:"font-medium capitalize",children:s.companyName}),e.jsx(t,{className:"text-muted-foreground",children:ie(new Date(s.postedDate),"MMM dd, yyyy")}),e.jsx(t,{children:e.jsx(l,{variant:"outline",onClick:()=>i(`/applications/${s.id}`),children:"Applicants"})}),e.jsx(t,{children:e.jsx(l,{variant:"outline",onClick:()=>i(`/job-rounds/${s.id}`),children:"Rounds info"})}),e.jsx(t,{children:e.jsx(l,{variant:"outline",onClick:()=>i(`/job/${s.id}`),children:"Details"})}),e.jsx(t,{children:e.jsxs(_,{open:v&&h===s.id,onOpenChange:o,children:[e.jsx(W,{asChild:!0,children:e.jsx(l,{size:"icon",variant:"ghost",onClick:()=>C(s.id),children:e.jsx(le,{className:"w-4 h-4"})})}),e.jsxs(X,{children:[e.jsxs(ee,{children:[e.jsx(se,{children:"Confirm Job Update"}),e.jsxs(ae,{children:['Are you sure you want to update the job "',s.jobTitle,'"?']})]}),e.jsxs(te,{children:[e.jsx(l,{variant:"ghost",onClick:()=>o(!1),children:"Cancel"}),e.jsx(l,{onClick:()=>T(s.id),children:"Yes, Update"})]})]})]})}),e.jsx(t,{children:e.jsxs(E,{children:[e.jsx(H,{asChild:!0,children:e.jsx(l,{size:"icon",variant:"ghost",children:e.jsx(I,{className:"w-4 h-4 text-red-500"})})}),e.jsxs($,{children:[e.jsxs(q,{children:[e.jsx(L,{children:"Delete Job"}),e.jsxs(Q,{children:['Are you sure you want to delete the job "',s.jobTitle,'"? This action cannot be undone.']})]}),e.jsxs(R,{children:[e.jsx(Z,{children:"Cancel"}),e.jsx(K,{onClick:()=>A(s.id),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})]})})]},s.id))})]})})]})}export{pe as default};
