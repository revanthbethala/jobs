import{c as I,o as k,s as b,a as O,r as N,b as S,d as P,e as C,t as E,j as e,m as a,B as F,L as j,I as w,f as M,A as q}from"./index-B6peOCw_.js";import{M as U}from"./mail-GgfDYgua.js";import{A as $}from"./arrow-left-OB26W1DN.js";import{U as V}from"./user-BHYVgTmJ.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=I("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=I("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=I("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=I("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=I("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),J=k({username:b().min(3,"Username is required"),password:b().min(8,"Password must be at least 8 characters")}),Y=k({email:b().min(1,"Email is required").email("Please enter a valid email address")}),Q=k({username:b().min(1,"username is required"),password:b().min(8,"Password must be at least 8 characters")}),W=k({username:b().min(3,"Username must be at least 3 characters").max(20,"Username must be less than 20 characters").regex(/^[a-zA-Z0-9_]+$/,"Username can only contain letters, numbers, and underscores"),email:b().min(1,"Email is required").email("Please enter a valid email address"),password:b().min(8,"Password must be at least 8 characters").regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,"Password must contain at least one lowercase letter, one uppercase letter, and one number")}),K=k({otp:b().length(6,"OTP must be exactly 6 digits").regex(/^\d+$/,"OTP must contain only numbers")}),Z=k({email:b().min(1,"Email is required").email("Please enter a valid email address")}),H=k({otp:b().length(6,"OTP must be exactly 6 digits").regex(/^\d+$/,"OTP must contain only numbers"),password:b().min(8,"Password must be at least 8 characters").regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,"Password must contain at least one lowercase letter, one uppercase letter, and one number"),confirmPassword:b()}).refine(t=>t.password===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),R="http://localhost:3000/api",_=async t=>{try{return(await O.post(`${R}/users/login`,t,{headers:{"Content-Type":"application/json"}})).data}catch(s){throw console.log(s),s}},G=async t=>{try{return(await O.post(`${R}/users/signup`,t,{headers:{"Content-Type":"application/json"}})).data}catch(s){throw console.log(s),s}},X=async t=>{try{return(await O.post(`${R}/users/verify-email`,t,{headers:{"Content-Type":"application/json"}})).status}catch(s){throw console.log(s),s}},ee=async t=>{try{return(await O.post(`${R}/users/request-password-otp`,t,{headers:{"Content-Type":"application/json"}})).status}catch(s){throw console.log(s),s}},te=async t=>{try{return await O.post(`${R}/users/reset-password`,t,{headers:{"Content-Type":"application/json"}})}catch(s){throw console.log(""),s}},se=()=>{const[t,s]=N.useState(["","","","","",""]),[r,u]=N.useState(30),c=N.useRef([]),{email:i,setCurrentStep:x,setAuthenticated:n}=S(),{toast:m}=P(),{handleSubmit:o,formState:{isSubmitting:y},setValue:g}=C({resolver:E(K)});N.useEffect(()=>{if(r>0){const d=setInterval(()=>{u(r-1)},1e3);return()=>clearInterval(d)}},[r]);const p=(d,h)=>{if(h.length>1)return;const l=[...t];l[d]=h,s(l),g("otp",l.join("")),h&&d<5&&c.current[d+1]?.focus()},v=(d,h)=>{h.key==="Backspace"&&!t[d]&&d>0&&c.current[d-1]?.focus()},f=d=>{d.preventDefault();const h=d.clipboardData.getData("text").slice(0,6),l=h.split("");for(;l.length<6;)l.push("");s(l),g("otp",h)},T=async()=>{const d=t.join("");console.log(d);const h={otp:d,email:i};console.log(h);try{const l=await X(h);if(!l)throw new Error("No response from server.");l===200?(m({title:"Email Verified!",description:"Your account has been successfully verified.Please Login to Continue"}),n(!0),x("login")):l===400||l===401?(s(["","","","","",""]),g("otp",""),m({title:"Invalid OTP",description:"The OTP you entered is incorrect or expired.",variant:"destructive"})):m({title:"Verification Error",description:"Something went wrong. Please try again.",variant:"destructive"})}catch(l){console.error("OTP verification failed:",l),m({title:"Network or Server Error",description:l?.message||"Unable to verify at this time.",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(a.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-brand-blue-light rounded-full mb-4",children:e.jsx(U,{className:"h-8 w-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-brand-gray-dark mb-2",children:"Verify Your Email"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"We've sent a 6-digit code to"}),e.jsx("p",{className:"text-brand-blue-dark font-medium text-sm",children:i})]}),e.jsxs("form",{onSubmit:o(T),className:"space-y-6",children:[e.jsx(a.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex space-x-2 justify-center",children:t.map((d,h)=>e.jsx("input",{ref:l=>{c.current[h]=l},type:"text",inputMode:"numeric",maxLength:1,value:d,onChange:l=>p(h,l.target.value.replace(/\D/,"")),onKeyDown:l=>v(h,l),onPaste:h===0?f:void 0,className:"w-12 h-12 text-center text-xl font-bold border-2 border-gray-300 rounded-lg focus:border-brand-blue-light focus:ring-2 focus:ring-brand-blue-light focus:ring-opacity-20 transition-colors"},h))}),e.jsx(a.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsx(F,{type:"submit",disabled:y||t.join("").length!==6,className:"w-full bg-brand-blue-light hover:bg-brand-blue-dark transition-colors",children:y?"Verifying...":"Verify Email"})})]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("button",{onClick:()=>x("signup"),className:"inline-flex items-center text-brand-blue-light hover:text-brand-blue-dark mb-4 transition-colors",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Back"]})}),e.jsx(a.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"text-center"})]})},ae=()=>{const{setCurrentStep:t,setEmail:s}=S(),{toast:r}=P(),{register:u,handleSubmit:c,formState:{errors:i,isSubmitting:x}}=C({resolver:E(Z)}),n=async m=>{try{const o=await ee(m);console.log("response",o),s(m.email),r({title:"Reset Code Sent!",description:"Check your email for the password reset code."}),t("reset-password")}catch(o){console.log(o),r({title:"Error",description:"Failed to send reset code. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(a.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-brand-blue-light rounded-full mb-4",children:e.jsx(B,{className:"h-8 w-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-brand-gray-dark mb-2",children:"Forgot Password?"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Enter your email address and we'll send you a code to reset your password."})]}),e.jsxs("form",{onSubmit:c(n),className:"space-y-4",children:[e.jsxs(a.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:[e.jsx(j,{htmlFor:"email",className:"text-brand-gray-dark",children:"Email Address"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(U,{className:"h-5 w-5 text-gray-400"})}),e.jsx(w,{id:"email",type:"email",placeholder:"Enter your email address",className:"pl-10 border-gray-300 focus:border-brand-blue-light focus:ring-brand-blue-light",...u("email")})]}),i.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.email.message})]}),e.jsx(a.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsx(F,{type:"submit",disabled:x,className:"w-full bg-brand-blue-light hover:bg-brand-blue-dark transition-colors",children:x?"Sending Code...":"Send Reset Code"})})]}),e.jsxs(a.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"text-center",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Remember your password?"," ",e.jsx("button",{onClick:()=>t("login"),className:"text-brand-blue-light hover:text-brand-blue-dark font-medium transition-colors",children:"Sign In"})]}),e.jsxs("button",{onClick:()=>t("login"),className:"inline-flex items-center text-base pt-2 text-brand-blue-light hover:text-brand-blue-dark mb-4 transition-colors",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})]})},re=()=>{const[t,s]=N.useState(!1),[r,u]=N.useState(!1),{email:c,setCurrentStep:i}=S(),{toast:x}=P(),{register:n,handleSubmit:m,formState:{errors:o,isSubmitting:y}}=C({resolver:E(H)}),g=async p=>{const{otp:v,password:f}=p;try{const d=await te({email:c,otp:v,newPassword:f});x({title:"Password Reset Successful!",description:"Your password has been updated. You can now sign in."}),i("login")}catch{x({title:"Reset Failed",description:"Invalid code or something went wrong. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(a.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-brand-blue-light rounded-full mb-4",children:e.jsx(D,{className:"h-8 w-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-brand-gray-dark mb-2",children:"Reset Password"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Enter the code sent to"}),e.jsx("p",{className:"text-brand-blue-dark font-medium text-sm mb-2",children:c}),e.jsx("p",{className:"text-gray-600 text-sm",children:"and create a new password"})]}),e.jsxs("form",{onSubmit:m(g),className:"space-y-4",children:[e.jsxs(a.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:[e.jsx(j,{htmlFor:"otp",className:"text-brand-gray-dark",children:"Verification Code"}),e.jsx(w,{id:"otp",type:"text",placeholder:"Enter 6-digit code",maxLength:6,className:"text-center font-mono text-lg border-gray-300 focus:border-brand-blue-light focus:ring-brand-blue-light",...n("otp")}),o.otp&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.otp.message})]}),e.jsxs(a.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:[e.jsx(j,{htmlFor:"password",className:"text-brand-gray-dark",children:"New Password"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(w,{id:"password",type:t?"text":"password",placeholder:"Create a strong password",className:"pr-10 border-gray-300 focus:border-brand-blue-light focus:ring-brand-blue-light",...n("password")}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>s(!t),children:t?e.jsx(A,{className:"h-5 w-5 text-gray-400"}):e.jsx(L,{className:"h-5 w-5 text-gray-400"})})]}),o.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.password.message})]}),e.jsxs(a.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},children:[e.jsx(j,{htmlFor:"confirmPassword",className:"text-brand-gray-dark",children:"Confirm Password"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(w,{id:"confirmPassword",type:r?"text":"password",placeholder:"Confirm your new password",className:"pr-10 border-gray-300 focus:border-brand-blue-light focus:ring-brand-blue-light",...n("confirmPassword")}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>u(!r),children:r?e.jsx(A,{className:"h-5 w-5 text-gray-400"}):e.jsx(L,{className:"h-5 w-5 text-gray-400"})})]}),o.confirmPassword&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.confirmPassword.message})]}),e.jsx(a.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},children:e.jsx(F,{type:"submit",disabled:y,className:"w-full bg-brand-blue-light hover:bg-brand-blue-dark transition-colors",children:y?"Resetting Password...":"Reset Password"})})]}),e.jsxs(a.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"text-center",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Remember your password?"," ",e.jsx("button",{onClick:()=>i("login"),className:"text-brand-blue-light hover:text-brand-blue-dark font-medium transition-colors",children:"Sign In"})]}),e.jsxs("button",{onClick:()=>i("forgot-password"),className:"inline-flex items-center text-base pt-2 text-brand-blue-light hover:text-brand-blue-dark mb-4 transition-colors",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Back"]})]})]})},ie=()=>{const[t,s]=N.useState(!1),{setCurrentStep:r,setEmail:u}=S(),{toast:c}=P(),{register:i,handleSubmit:x,formState:{errors:n,isSubmitting:m}}=C({resolver:E(W)}),o=async y=>{try{u(y.email);const g={...y,role:"USER"},p=await G(g);console.log(p),console.log("Signup data:",y),c({title:"Account Created!",description:"Please verify your email with the OTP we sent."}),r("otp")}catch{c({title:"Signup Failed",description:"Something went wrong. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(a.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:[e.jsx("h2",{className:"text-2xl font-bold text-brand-gray-dark mb-2",children:"Create Account"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Join JobQuest and start your career journey"})]}),e.jsxs("form",{onSubmit:x(o),className:"space-y-4",children:[e.jsxs(a.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:[e.jsx(j,{htmlFor:"username",className:"text-brand-gray-dark",children:"Username"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(V,{className:"h-5 w-5 text-gray-400"})}),e.jsx(w,{id:"username",type:"text",placeholder:"Choose a username",className:"pl-10 border-gray-300 focus:border-brand-blue-light focus:ring-brand-blue-light",...i("username")})]}),n.username&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.username.message})]}),e.jsxs(a.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:[e.jsx(j,{htmlFor:"email",className:"text-brand-gray-dark",children:"Email Address"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(U,{className:"h-5 w-5 text-gray-400"})}),e.jsx(w,{id:"email",type:"email",placeholder:"Enter your email",className:"pl-10 border-gray-300 focus:border-brand-blue-light focus:ring-brand-blue-light",...i("email")})]}),n.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.email.message})]}),e.jsxs(a.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},children:[e.jsx(j,{htmlFor:"password",className:"text-brand-gray-dark",children:"Password"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(w,{id:"password",type:t?"text":"password",placeholder:"Create a strong password",className:"pr-10 border-gray-300 focus:border-brand-blue-light focus:ring-brand-blue-light",...i("password")}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>s(!t),children:t?e.jsx(A,{className:"h-5 w-5 text-gray-400"}):e.jsx(L,{className:"h-5 w-5 text-gray-400"})})]}),n.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.password.message}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Must contain uppercase, lowercase, and number"})]}),e.jsx(a.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},children:e.jsx(F,{type:"submit",disabled:m,className:"w-full bg-brand-blue-light hover:bg-brand-blue-dark transition-colors",children:m?"Creating Account...":"Create Account"})})]}),e.jsx(a.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx("button",{onClick:()=>r("login"),className:"text-brand-blue-light hover:text-brand-blue-dark font-medium transition-colors",children:"Sign In"})]})})]})},ne=()=>{const[t,s]=N.useState(!1),{toast:r}=P(),{loginToken:u}=S(),c=M(),{register:i,handleSubmit:x,formState:{errors:n,isSubmitting:m}}=C({resolver:E(Q)}),o=async y=>{const g={...y};try{const p=await _(g);console.log(p),r({title:"Login Successful!",description:"Welcome back to JobQuest."});const v=p?.user?.role,{token:f}=p;u(f,v),c("/")}catch(p){p.response.status==403&&r({title:"Login Failed",description:"Please verify your account before logging in.",variant:"destructive"}),r({title:"Login Failed",description:"Invalid username or password",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(a.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-brand-blue-dark rounded-full mb-4",children:e.jsx(D,{className:"h-8 w-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-brand-gray-dark mb-2",children:"Admin Access"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Sign in to access the admin panel"})]}),e.jsxs("form",{onSubmit:x(o),className:"space-y-4",children:[e.jsxs(a.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:[e.jsx(j,{htmlFor:"email",className:"text-brand-gray-dark",children:"Admin Email"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(U,{className:"h-5 w-5 text-gray-400"})}),e.jsx(w,{id:"username",type:"text",placeholder:"Enter your admin email",className:"pl-10 border-gray-300 focus:border-brand-blue-light focus:ring-brand-blue-light",...i("username")})]}),n.username&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.username.message})]}),e.jsxs(a.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:[e.jsx(j,{htmlFor:"password",className:"text-brand-gray-dark",children:"Password"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(w,{id:"password",type:t?"text":"password",placeholder:"Enter your password",className:"pr-10 border-gray-300 focus:border-brand-blue-light focus:ring-brand-blue-light",...i("password")}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>s(!t),children:t?e.jsx(A,{className:"h-5 w-5 text-gray-400"}):e.jsx(L,{className:"h-5 w-5 text-gray-400"})})]}),n.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.password.message})]}),e.jsx(a.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},children:e.jsx(F,{type:"submit",disabled:m,className:"w-full hover:bg-brand-blue-dark bg-brand-blue-light transition-colors",children:m?"Signing In...":"Sign In"})})]})]})},oe=()=>{const[t,s]=N.useState(!1),{setCurrentStep:r,loginToken:u,isAuthenticated:c}=S(),{toast:i}=P(),x=M(),{register:n,handleSubmit:m,formState:{errors:o,isSubmitting:y}}=C({resolver:E(J)}),g=async p=>{try{const v={...p},f=await _(v);console.log(f),i({title:"Login Successful!",description:"Welcome back to JobQuest."}),console.log("login data",f);const T=f?.user?.role,{token:d}=f;u(d,T),x("/jobs")}catch(v){v.response.status==403&&(i({title:"Login Failed",description:"Please verify your account before logging in.",variant:"destructive"}),r("login-email")),i({title:"Login Failed",description:"Invalid username or password",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(a.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:[e.jsx("h2",{className:"text-2xl font-bold text-brand-gray-dark mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Sign in to continue your job search"})]}),e.jsxs("form",{onSubmit:m(g),className:"space-y-4",children:[e.jsxs(a.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:[e.jsx(j,{htmlFor:"email",className:"text-brand-gray-dark",children:"Username"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(V,{className:"h-5 w-5 text-gray-400"})}),e.jsx(w,{id:"username",type:"text",placeholder:"Enter your username",className:"pl-10 border-gray-300 focus:outline-none focus:border-brand-blue-light focus:ring-brand-blue-light",...n("username")})]}),o.username&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.username.message})]}),e.jsxs(a.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:[e.jsx(j,{htmlFor:"password",className:"text-brand-gray-dark",children:"Password"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx(w,{id:"password",type:t?"text":"password",placeholder:"Enter your password",className:"pr-10 border-gray-300 focus:border-brand-blue-light focus:ring-brand-blue-light",...n("password")}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>s(!t),"aria-label":"Close/Show",children:t?e.jsx(A,{className:"h-5 w-5 text-gray-400"}):e.jsx(L,{className:"h-5 w-5 text-gray-400"})})]}),o.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.password.message})]}),e.jsx(a.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"flex items-center justify-between",children:e.jsx("button",{type:"button",onClick:()=>r("forgot-password"),className:"text-sm text-brand-blue-light hover:text-brand-blue-dark transition-colors",children:"Forgot Password?"})}),e.jsx(a.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},children:e.jsx(F,{type:"submit",disabled:y,className:"w-full bg-brand-blue-light hover:bg-brand-blue-dark transition-colors",children:y?"Signing In...":"Sign In"})})]}),e.jsx(a.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx("button",{onClick:()=>r("signup"),className:"text-brand-blue-light hover:text-brand-blue-dark font-medium transition-colors",children:"Sign Up"})]})})]})},le=()=>{const{userType:t,setUserType:s,setCurrentStep:r}=S(),u=c=>{s(c),r("login")};return e.jsxs("div",{className:"relative bg-slate-200/40 rounded-lg p-1 flex",children:[e.jsx(a.div,{layout:!0,className:"absolute inset-y-1  bg-brand-blue-light rounded-lg shadow-sm",initial:!1,animate:{x:t==="user"?0:"100%",width:"50%"},transition:{type:"spring",stiffness:300,damping:30}}),e.jsx("button",{onClick:()=>u("user"),className:`relative z-10 flex-1 py-2 px-4 text-sm font-medium rounded-lg transition-colors duration-200 ${t==="user"?"text-white":"text-brand-gray-dark hover:text-brand-blue-dark"}`,children:"User"}),e.jsx("button",{onClick:()=>u("admin"),className:`relative z-10 flex-1 py-3 px-6 text-sm font-medium rounded-lg transition-colors duration-200 ${t==="admin"?"text-white":"text-brand-gray-dark hover:text-brand-blue-dark"}`,children:"Admin"})]})},ce=()=>{const{setCurrentStep:t,setEmail:s}=S(),{toast:r}=P(),{register:u,handleSubmit:c,formState:{errors:i,isSubmitting:x}}=C({resolver:E(Y)}),n=async m=>{try{s(m.email),r({title:"Login Code Sent!",description:"Check your inbox for the login verification code."}),t("otp")}catch(o){console.error(o),r({title:"Error",description:"Could not send login code. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(a.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-brand-blue-light rounded-full mb-4",children:e.jsx(z,{className:"h-8 w-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-brand-gray-dark mb-2",children:"Welcome Back!"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Enter your email address to receive a one-time login code."})]}),e.jsxs("form",{onSubmit:c(n),className:"space-y-4",children:[e.jsxs(a.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:[e.jsx(j,{htmlFor:"email",className:"text-brand-gray-dark",children:"Email Address"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(U,{className:"h-5 w-5 text-gray-400"})}),e.jsx(w,{id:"email",type:"email",placeholder:"Enter your email address",className:"pl-10 border-gray-300 focus:border-brand-blue-light focus:ring-brand-blue-light",...u("email")})]}),i.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.email.message})]}),e.jsx(a.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsx(F,{type:"submit",disabled:x,className:"w-full bg-brand-blue-light hover:bg-brand-blue-dark transition-colors",children:x?"Sending Code...":"Send Login Code"})})]})]})},he=()=>{const{userType:t,currentStep:s}=S(),u=new Date().getFullYear(),c=()=>s==="otp"?e.jsx(se,{}):s==="forgot-password"?e.jsx(ae,{}):s==="reset-password"?e.jsx(re,{}):s==="login-email"?e.jsx(ce,{}):s==="signup"&&t==="user"?e.jsx(ie,{}):t==="admin"?e.jsx(ne,{}):e.jsx(oe,{}),i=["otp","forgot-password","reset-password"].includes(s);return e.jsx("div",{className:"min-h-screen bg-gray-200/30 flex items-center justify-center px-4 py-8",children:e.jsxs("div",{className:"w-full max-w-xl",children:[e.jsxs(a.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"bg-white/90 backdrop-blur-sm rounded-3xl shadow-lg overflow-hidden border border-white/30",children:[e.jsxs("div",{className:"bg-brand-blue-dark px-10 py-6 text-center rounded-t-3xl",children:[e.jsx(a.h1,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-4xl font-extrabold text-white",children:"JobQuest"}),e.jsx(a.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-blue-200 text-sm mt-1",children:"Your Career Journey Starts Here"})]}),!i&&e.jsx("div",{className:"px-10 pt-6",children:e.jsx(le,{})}),e.jsx("div",{className:"px-10 pb-10 pt-6",children:e.jsx(q,{mode:"wait",children:e.jsx(a.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.4},children:c()},`${t}-${s}`)})})]}),e.jsxs(a.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"text-center mt-8  text-sm tracking-wide",children:["© ",u," ",e.jsx("span",{className:"font-semibold",children:"JobQuest"}),". All rights reserved."]})]})})};export{he as default};
